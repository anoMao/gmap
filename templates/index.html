<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html"; charset="utf-8" />
    <title>Google 地圖</title>
    <script async defer type="text/javascript" src="https://maps.googleapis.com/maps/api/js?callback=loadGoogleMap"></script>
<!--    <script language="javascript"> 早期寫法-->
    <script type="text/javascript">
        google.maps.event.addDomListener(window,'load',loadGoogleMap); // 確定網頁load好後，才啟動 GoogleMap

        function loadGoogleMap(){ //顯示 GoogleMap
            // 設定地圖
            map = new google.maps.Map(document.getElementById('map_div'),{
                zoom:19,
                center:{
                    lat:25.0336962,
                    lng:121.5643673
                }
            });
        }

        function go() {
            clearMarkers();
            for (var i=0 ;i < position.length; i++){
                addMarker(i);
            }
        }

        function addMarker(i){
            markers.push(new google.maps.Marker({
            position:{
                lat:position[i].lat,
                lng:position[i].lng
            },
            map:map,
            animation: google.maps.Animation.DROP
            }));
            console.log(markers[i]);
        }

        function clearMarkers(){
            for (var i = 0 ; i < position.length ; i++){
                if (markers[i]){
                    markers[i].setMap(null);
                }
            }
            markers=[];
        }

    </script>
</head>
<body>
    <h2>Google 地圖</h2>
    <div id="map_div" style="height:400px ; width:600px ; border:1px solid black;"></div>
    <button id="btn" onclick="go()">放置地圖標記</button>
    <script>
        var map;
        var markers = [];
        var position = [
            {label:'A',lat:25.0336962,lng:121.5643673},
            {label:'B',lat:25.0333698,lng:121.5641564},
            {label:'C',lat:25.033899,lng:121.564329},
            {label:'D',lat:25.0338407,lng:121.5645269},
            {label:'E',lat:25.0336377,lng:121.5645727}
            ];
    </script>
<!--    <input style="button" value="加入地標" onclick="addmark()";style="margin=10px;" >-->
<!--    <input style="button" value="顯示街景" onclick="show_streeview()";style="margin=10px;">-->
</body>
</html>